(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(27),i=a.n(r),o=a(24),c=a(18),l=a(19),d=a(22),p=a(21),u=a(13),h=a.n(u),m=a(2),g=a(36),f=a.n(g),b=a(37),k=a.n(b),E=a(38),v=a(8),R=a.n(v);R.a.ajaxPrefilter((function(e){e.crossDomain&&R.a.support.cors&&(e.url="https://cors-anywhere.herokuapp.com/"+e.url)}));var x=new function e(){var t=this;Object(c.a)(this,e),this.setToken=function(e){t.access_token=e,console.log("set tok")},this.callAPI=function(e,a,n){a.access_token||(a.access_token=t.access_token),a.v||(a.v="5.111"),t.VKAppApi.callAPIMethod(e,a).then(n)},this.access_token="",this.AppID=7548849,this.VKAppApi=new E.VKMiniAppAPI,this.VKAppApi.initApp()},y=a(20),D=a.n(y),A=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).DateRegGetFreiends=function(e){var t=e.target.value;R()("#DateRegResult").hide(),x.callAPI("friends.search",{q:t,fields:"photo_100",count:10},(function(e){console.log(e),n.setState({DateRegUsersList:e.items})}))},n.DateRegSetUid=function(e){R()("#DateRegUserId").val(e),n.DateRegGet()},n.DateRegGet=function(){if(!R()("#DateRegButton").is(":disabled")){R()("#DateRegUserId").prop("disabled",!0),R()("#DateRegButton").prop("disabled",!0),n.setState({btnEnabled:!1}),n.setState({DateRegUsersList:[]});var e="\u0415\u0433\u0433\u043e\u0433 :\u041e",t=function(){R()("#DateRegText").html(e),R()("#DateRegResult").slideDown("fast",(function(){R()("#DateRegUserId").prop("disabled",!1),R()("#DateRegButton").prop("disabled",!1),n.setState({btnEnabled:!0})}))},a=function(a){R.a.ajax("https://vk.com/foaf.php?id="+a).done((function(a){var n=a.match(/<ya:created dc:date="([\d]{4}-[\d]{2}-[\d]{2}T[\d]{2}:[\d]{2}:[\d]{2}\+[\d]{2}:[\d]{2})"/i),s=a.match(/<foaf:name>(.+)<\/foaf:name>/i);if(n&&s){var r=n[1].split("T")[0].split("-");e="["+s[1]+"]<br>\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:<br>"+r[2]+"."+r[1]+"."+r[0]}return t()}))};R()("#DateRegResult").fadeOut("fast",(function(){var n=R()("#DateRegUserId").val().trim(),s="";if(/^(-?\d+)$/.test(n))a(n);else{var r=n.match(/(https?:\/\/)?(vk.com)?\/?(.+)/i);if(!r[0])return e+="<br>\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u0432\u0435\u0440\u043d\u0430\u044f",t();s=r[3],x.callAPI("utils.resolveScreenName",{screen_name:s},(function(n){if("user"!==n.type)return e+="<br>\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",t();a(n.object_id)}))}}))}},n.state={DateRegUsersList:[],btnEnabled:!0},n.DateRegGetFreiends({target:{value:""}}),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(m.j,{id:this.props.id},s.a.createElement(m.k,{addon:s.a.createElement(m.m,{onClick:this.props.goBack},"\u041d\u0430\u0437\u0430\u0434"),left:s.a.createElement(m.l,{onClick:this.props.goBack})},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),s.a.createElement(m.f,null,s.a.createElement(m.e,null,s.a.createElement(m.i,{top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f / \u041f\u043e\u0438\u0441\u043a \u0434\u0440\u0443\u0433\u0430",id:"DateRegUserId",defaultValue:this.props.user.id,onChange:this.DateRegGetFreiends}),this.state.DateRegUsersList.length>0&&s.a.createElement(m.h,{id:"DateRegSearchResult"},s.a.createElement("div",{style:{display:"flex"}},this.state.DateRegUsersList.map((function(t){return s.a.createElement("div",{key:t.id,className:"horizontal_item","data-uid":t.id,onClick:function(a){return e.DateRegSetUid(t.id)}},s.a.createElement(m.a,{size:64,src:t.photo_100}),s.a.createElement(m.s,null,t.first_name+" "+t.last_name))})))),s.a.createElement(m.b,{id:"DateRegButton",size:"xl",before:this.state.btnEnabled?s.a.createElement(D.a,null):"",onClick:this.DateRegGet},this.state.btnEnabled?"\u0423\u0437\u043d\u0430\u0442\u044c":s.a.createElement(m.q,{size:"regular"})))),s.a.createElement(m.d,{style:{display:"none"},id:"DateRegResult"},s.a.createElement("div",{style:{backgroundImage:"url('https://sun9-30.userapi.com/c853520/v853520560/21e5b6/xrSo_ya_iRs.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",height:200,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"6px",borderRadius:12}},s.a.createElement(m.t,{level:"1",weight:"heavy",id:"DateRegText",style:{textAlign:"center",color:"#fff",textShadow:"4px 4px 5px #000, -4px 4px 5px #000,-4px -4px 5px #000, 4px -4px 5px #000"}},this.props.user.first_name,", \u0442\u044b \u0448\u043e, \u0434\u0443\u0440\u0430\u043a \u0448\u043e\u043b\u044c!?"))))}}]),a}(s.a.Component),_=function(e){var t=e.id,a=e.goBack,n=(e.goForward,e.user);return s.a.createElement(m.j,{id:t},s.a.createElement(m.k,{addon:s.a.createElement(m.m,{onClick:a},"\u041d\u0430\u0437\u0430\u0434"),left:s.a.createElement(m.l,{onClick:a})},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),s.a.createElement(m.f,null,s.a.createElement(m.e,null,s.a.createElement(m.i,{top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",id:"DateRegUserId",defaultValue:n.id}),s.a.createElement(m.b,{size:"xl",before:s.a.createElement(D.a,null)},"\u0423\u0437\u043d\u0430\u0442\u044c"))),s.a.createElement(m.d,{style:{display:"none"},id:"DateRegResult"},s.a.createElement("div",{style:{backgroundImage:"url('https://sun9-30.userapi.com/c853520/v853520560/21e5b6/xrSo_ya_iRs.jpg')",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",height:200,display:"flex",alignItems:"center",justifyContent:"center",paddingBottom:"6px",borderRadius:12}},s.a.createElement(m.t,{level:"1",weight:"heavy",id:"DateRegText",style:{textAlign:"center",color:"#fff",textShadow:"4px 4px 5px #000, -4px 4px 5px #000,-4px -4px 5px #000, 4px -4px 5px #000"}},n.first_name,", \u0442\u044b \u0448\u043e, \u0434\u0443\u0440\u0430\u043a \u0448\u043e\u043b\u044c!?"))))},w=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).goForward=function(e){var t=e.currentTarget.dataset.to,a=Object(o.a)(n.state.history);a.push(t),"main"===n.state.activePanel&&h.a.send("VKWebAppEnableSwipeBack"),n.setState({history:a,activePanel:t})},n.goBack=function(){var e=Object(o.a)(n.state.history);e.pop();var t=e[e.length-1];console.log(t),"main"===t&&h.a.send("VKWebAppDisableSwipeBack"),n.setState({history:e,activePanel:t})},n.state={activePanel:"Main",scheme:"bright_light",schemeDark:["space_gray","client_dark"],fetchedUser:{id:0,first_name:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",last_name:"",sex:0,photo_200:"https://vk.com/images/camera_100.png"},history:["Main"],popout:s.a.createElement(m.o,{size:"large"})},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.subscribe((function(t){switch(t.detail.type){case"VKWebAppInitResult":case"VKWebAppCallAPIMethodResult":break;case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data}),e.setState({popout:""});break;case"VKWebAppUpdateConfig":var a=e.state.schemeDark.includes(t.detail.data.scheme);e.setState({scheme:a?"space_gray":"bright_light"});break;case"VKWebAppGetAuthTokenResult":case"VKWebAppAccessTokenReceived":console.log("VKWebAppGetAuthTokenResult"),x.setToken(t.detail.data.access_token);break;default:console.log(t.type),console.log(t)}})),h.a.send("VKWebAppInit"),h.a.send("VKWebAppGetUserInfo",{}),h.a.send("VKWebAppGetAuthToken",{app_id:x.AppID,scope:"friends,photos,wall,groups"})}},{key:"render",value:function(){return s.a.createElement(m.c,{scheme:this.state.scheme,isWebView:!0},s.a.createElement(m.u,{id:"View1",popout:this.state.popout,activePanel:this.state.activePanel,onSwipeBack:this.goBack,history:this.state.history},s.a.createElement(m.j,{id:"Main"},s.a.createElement(m.k,null,"byKIM"),s.a.createElement(m.f,{header:s.a.createElement(m.g,{mode:"secondary"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c")},s.a.createElement(m.n,{disabled:!0,text:s.a.createElement(m.r,{weight:"regular",style:{color:"var(--text_secondary)"}},"id"+this.state.fetchedUser.id),before:s.a.createElement(m.a,{size:72,src:this.state.fetchedUser.photo_200})},s.a.createElement(m.s,{weight:"medium"},this.state.fetchedUser.first_name+" "+this.state.fetchedUser.last_name))),s.a.createElement(m.f,{header:s.a.createElement(m.g,{mode:"secondary"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438")},s.a.createElement(m.p,{onClick:this.goForward,"data-to":"FunctionDateReg",before:s.a.createElement(f.a,null)},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),s.a.createElement(m.p,{onClick:this.goForward,"data-to":"FunctionDeadFollowers",before:s.a.createElement(k.a,null)},"\u041c\u0435\u0440\u0442\u0432\u044b\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438"))),s.a.createElement(A,{id:"FunctionDateReg",goBack:this.goBack,goForward:this.goForward,user:this.state.fetchedUser}),s.a.createElement(_,{id:"FunctionDeadFollowers",goBack:this.goBack,goForward:this.goForward,user:this.state.fetchedUser})))}}]),a}(s.a.Component);a(109),a(110);i.a.render(s.a.createElement(w,null),document.getElementById("root"))},94:function(e,t,a){e.exports=a(111)}},[[94,1,2]]]);
//# sourceMappingURL=main.f4fd7b83.chunk.js.map