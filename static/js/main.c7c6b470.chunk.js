(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(29),o=a.n(r),l=a(26),c=a(17),i=a(19),d=a(21),u=a(20),p=a(2),h=a(39),m=a.n(h),g=a(40),b=a.n(g),f=a(22),E=a.n(f),k=a(23),v=a(41),D=a(18),R=a.n(D),w=a(7),y=a.n(w);y.a.ajaxPrefilter((function(e){e.crossDomain&&y.a.support.cors&&(e.url="https://cors-anywhere.herokuapp.com/"+e.url)}));var A=new function e(){var t=this;Object(c.a)(this,e),this.setToken=function(e){t.access_token=e},this.callAPI=function(){var e=Object(k.a)(E.a.mark((function e(a,n,s){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.access_token||(n.access_token=t.access_token),n.v||(n.v="5.111"),e.next=4,t.VKAppApi.callAPIMethod(a,n).then(s);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.ending=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},this.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return console.log("rnd col"),e},this.access_token="",this.AppID=7548849,this.VKAppApi=new v.VKMiniAppAPI,this.VKAppApi.initApp(),this.connect=R.a},F=a(24),B=a.n(F),_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).DateRegGetFreiends=function(){clearTimeout(n.timer),n.timer=setTimeout((function(){y()("#DateRegResult").hide(),A.callAPI("friends.search",{q:!0===n.timerBool?"":y()("#DateRegUserId").val().trim(),fields:"photo_100",count:10},(function(e){n.timerBool=!1,console.log(e),n.setState({DateRegUsersList:e.items})}))}),!0===n.timerBool?0:1e3)},n.DateRegSetUid=function(e){y()("#DateRegUserId").val(e),n.DateRegGet()},n.DateRegGet=function(){y()("#DateRegButton").is(":disabled")||(clearTimeout(n.timer),y()("#DateRegUserId").prop("disabled",!0),y()("#DateRegButton").prop("disabled",!0),n.setState({btnEnabled:!1}),n.setState({DateRegUsersList:[]}),y()("#DateRegResult").fadeOut("fast",Object(k.a)(E.a.mark((function e(){var t,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y()("#DateRegUserId").val().trim(),a="",r="",!/^(-?\d+)$/.test(t)){e.next=7;break}r=t,e.next=10;break;case 7:return a=t.replace(/(https?:\/\/)?(vk\.com)?\/?/i,""),e.next=10,A.callAPI("utils.resolveScreenName",{screen_name:a},(function(e){console.log(e),"user"===e.type?r=e.object_id:n.setState({result:s.a.createElement(p.c,{size:"l",className:"ResultCard",mode:"shadow",style:{background:"linear-gradient(32deg, "+A.getRandomColor()+" 0%, "+A.getRandomColor()+" 100%)"}},s.a.createElement(p.v,{level:"1",weight:"heavy"},"\u0415\u0433\u0433\u043e\u0433 :\u041e",s.a.createElement("br",null),"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435 \u0432\u0435\u0440\u043d\u0430\u044f"))})}));case 10:if(!r){e.next=13;break}return e.next=13,y.a.ajax("https://vk.com/foaf.php?id="+r).done((function(e){var t=e.match(/<ya:created dc:date="([\d]{4}-[\d]{2}-[\d]{2}T[\d]{2}:[\d]{2}:[\d]{2}\+[\d]{2}:[\d]{2})"/i),a=e.match(/<foaf:name>(.+)<\/foaf:name>/i);if(t&&a){var r=t[1].split("T")[0].split("-");n.setState({result:s.a.createElement(p.c,{size:"l",className:"ResultCard",mode:"shadow",style:{background:"linear-gradient(32deg, "+A.getRandomColor()+" 0%, "+A.getRandomColor()+" 100%)"}},s.a.createElement(p.v,{level:"1",weight:"heavy"},"["+a[1]+"]",s.a.createElement("br",null),"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:",s.a.createElement("br",null),r[2]+"."+r[1]+"."+r[0]))})}}));case 13:y()("#DateRegResult").slideDown("fast",(function(){y()("#DateRegUserId").prop("disabled",!1),y()("#DateRegButton").prop("disabled",!1),n.setState({btnEnabled:!0})}));case 14:case"end":return e.stop()}}),e)})))))},n.state={DateRegUsersList:[],btnEnabled:!0,result:null},n.timer=!0,n.timerBool=!0,n.DateRegGetFreiends(),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement(p.k,{id:this.props.id},s.a.createElement(p.l,{addon:s.a.createElement(p.n,{onClick:this.props.goBack},"\u041d\u0430\u0437\u0430\u0434"),left:s.a.createElement(p.m,{onClick:this.props.goBack})},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),s.a.createElement(p.g,null,s.a.createElement(p.f,null,s.a.createElement(p.j,{top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f / \u041f\u043e\u0438\u0441\u043a \u0434\u0440\u0443\u0433\u0430",id:"DateRegUserId",defaultValue:this.props.user.id,onChange:this.DateRegGetFreiends}),this.state.DateRegUsersList.length>0&&s.a.createElement(p.i,{id:"DateRegSearchResult"},s.a.createElement("div",{style:{display:"flex"}},this.state.DateRegUsersList.map((function(t){return s.a.createElement("div",{key:t.id,className:"HorizontalItem","data-uid":t.id,onClick:function(a){return e.DateRegSetUid(t.id)}},s.a.createElement(p.a,{size:64,src:t.photo_100}),s.a.createElement(p.u,null,t.first_name+" "+t.last_name))})))),s.a.createElement(p.b,{id:"DateRegButton",size:"xl",before:this.state.btnEnabled?s.a.createElement(B.a,null):"",onClick:this.DateRegGet},this.state.btnEnabled?"\u0423\u0437\u043d\u0430\u0442\u044c":s.a.createElement(p.s,{size:"regular"})))),s.a.createElement(p.e,{id:"DateRegResult"},this.state.result))}}]),a}(s.a.Component),I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).DeadFollowersGet=function(){y()("#DeadFollowersButton").is(":disabled")||(y()("#DeadFollowersInput").prop("disabled",!0),y()("#DeadFollowersButton").prop("disabled",!0),n.setState({btnEnabled:!1}),y()("#DeadFollowersResult").slideDown("fast",(function(){y()("#DeadFollowersUserId").prop("disabled",!1),y()("#DeadFollowersButton").prop("disabled",!1),n.setState({btnEnabled:!0})})))},n.state={btnEnabled:!0,selector:!0},n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement(p.k,{id:this.props.id},s.a.createElement(p.l,{addon:s.a.createElement(p.n,{onClick:this.props.goBack},"\u041d\u0430\u0437\u0430\u0434"),left:s.a.createElement(p.m,{onClick:this.props.goBack})},"\u041c\u0435\u0440\u0442\u0432\u044b\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438"),s.a.createElement(p.g,null,s.a.createElement(p.f,null,s.a.createElement(p.q,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},s.a.createElement("option",{value:"m"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),s.a.createElement("option",{value:"f"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439")),!this.state.selector&&s.a.createElement(p.j,{top:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f/\u0433\u0440\u0443\u043f\u043f\u0443",id:"DeadFollowersInput"}),s.a.createElement(p.b,{id:"DeadFollowersButton",size:"xl",before:this.state.btnEnabled?s.a.createElement(B.a,null):"",onClick:this.DeadFollowersGet},this.state.btnEnabled?"\u0423\u0437\u043d\u0430\u0442\u044c":s.a.createElement(p.s,{size:"regular"})))),s.a.createElement(p.e,{id:"DeadFollowersResult"},this.state.result))}}]),a}(s.a.Component),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).goForward=function(e){var t=e.currentTarget.dataset.to,a=Object(l.a)(n.state.history);a.push(t),"main"===n.state.activePanel&&A.connect.send("VKWebAppEnableSwipeBack"),n.setState({history:a,activePanel:t})},n.goBack=function(){var e=Object(l.a)(n.state.history);e.pop();var t=e[e.length-1];console.log(t),"main"===t&&A.connect.send("VKWebAppDisableSwipeBack"),n.setState({history:e,activePanel:t})},n.state={activePanel:"Main",scheme:"bright_light",schemeDark:["space_gray","client_dark"],fetchedUser:{id:0,first_name:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",last_name:"",sex:0,photo_200:"https://vk.com/images/camera_100.png"},history:["Main"],popout:s.a.createElement(p.p,{size:"large"})},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;A.connect.subscribe((function(t){switch(t.detail.type){case"VKWebAppInitResult":console.log("INIT");break;case"VKWebAppCallAPIMethodResult":break;case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data}),e.setState({popout:""});break;case"VKWebAppUpdateConfig":var a=e.state.schemeDark.includes(t.detail.data.scheme);e.setState({scheme:a?"space_gray":"bright_light"});break;case"VKWebAppGetAuthTokenResult":case"VKWebAppAccessTokenReceived":console.log("Set access_token"),A.setToken(t.detail.data.access_token);break;default:console.log(t.type),console.log(t)}})),A.connect.send("VKWebAppGetUserInfo",{}),A.connect.send("VKWebAppGetAuthToken",{app_id:A.AppID,scope:"friends,photos,wall,groups"})}},{key:"render",value:function(){return s.a.createElement(p.d,{scheme:this.state.scheme,isWebView:!0},s.a.createElement(p.w,{id:"View1",popout:this.state.popout,activePanel:this.state.activePanel,onSwipeBack:this.goBack,history:this.state.history},s.a.createElement(p.k,{id:"Main"},s.a.createElement(p.l,null,"byKIM"),s.a.createElement(p.g,{header:s.a.createElement(p.h,{mode:"secondary"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c")},s.a.createElement(p.o,{disabled:!0,text:s.a.createElement(p.t,{weight:"regular",style:{color:"var(--text_secondary)"}},"id"+this.state.fetchedUser.id),before:s.a.createElement(p.a,{size:72,src:this.state.fetchedUser.photo_200})},s.a.createElement(p.u,{weight:"medium"},this.state.fetchedUser.first_name+" "+this.state.fetchedUser.last_name))),s.a.createElement(p.g,{header:s.a.createElement(p.h,{mode:"secondary"},"\u0424\u0443\u043d\u043a\u0446\u0438\u0438")},s.a.createElement(p.r,{onClick:this.goForward,"data-to":"FunctionDateReg",before:s.a.createElement(m.a,null)},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),s.a.createElement(p.r,{onClick:this.goForward,"data-to":"FunctionDeadFollowers",before:s.a.createElement(b.a,null)},"\u041c\u0435\u0440\u0442\u0432\u044b\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438"))),s.a.createElement(_,{id:"FunctionDateReg",goBack:this.goBack,goForward:this.goForward,user:this.state.fetchedUser}),s.a.createElement(I,{id:"FunctionDeadFollowers",goBack:this.goBack,goForward:this.goForward,user:this.state.fetchedUser})))}}]),a}(s.a.Component);a(111),a(112);o.a.render(s.a.createElement(U,null),document.getElementById("root"))},95:function(e,t,a){e.exports=a(113)}},[[95,1,2]]]);
//# sourceMappingURL=main.c7c6b470.chunk.js.map